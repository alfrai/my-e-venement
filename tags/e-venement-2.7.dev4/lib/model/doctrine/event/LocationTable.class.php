<?php

/**
 * LocationTable
 * 
 * This class has been auto-generated by the Doctrine ORM Framework
 */
class LocationTable extends PluginLocationTable
{
    /**
     * Returns an instance of this class.
     *
     * @return object LocationTable
     */
    public static function getInstance()
    {
        return Doctrine_Core::getTable('Location');
    }

  public function retrievePlaces()
  {
    return $this->createQuery('l')->andWhere('l.place = TRUE');
  }
  public function retrieveResources()
  {
    return $this->createQuery('l')->andWhere('l.place = FALSE');
  }
  
  public function createQuery($alias = 'a')
  {
    $o  = 'o'   != $alias ? 'o'   : 'o1';
    $c  = 'c'   != $alias ? 'c'   : 'c1';
        
    return parent::createQuery($alias)
      ->leftJoin("$alias.Organism $o")
      ->leftJoin("$alias.Contact $c")
    ;
  }
}
